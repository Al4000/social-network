{"version":3,"sources":["hoc/withAuthRedirect.js","redux/profileReducer.ts","redux/messagesReducer.ts","components/Navbar/Navbar.module.css","static/preloader.gif","components/common/Preloader/Preloader.module.css","static/178.gif","components/News/News.module.css","components/Music/Music.module.css","components/Settings/Settings.module.css","static/my.png","static/Screenshot_2.png","static/Screenshot_3.png","static/helena.jpg","static/Screenshot_5.png","static/Screenshot_6.png","components/Users/Users.module.css","api/api.js","serviceWorker.js","redux/usersReducer.ts","components/Users/Paginator.jsx","components/Users/User/User.jsx","components/Users/Users.jsx","redux/usersSelectors.js","components/Users/UsersContainer.jsx","components/Header/Header.jsx","redux/authReducer.ts","components/Header/HeaderContainer.jsx","components/Navbar/Navbar.jsx","redux/sidebarReducer.js","components/Navbar/NavbarContainer.jsx","components/News/News.jsx","components/Music/Music.jsx","components/Settings/Settings.jsx","components/Login/Login.jsx","redux/appReducer.ts","redux/redux-store.js","App.js","index.js","components/Login/Login.module.css","components/Header/Header.module.css","components/common/Preloader/Preloader.jsx","static/avatar.png"],"names":["mapStateToPropsForRedirect","state","isAuth","auth","withAuthRedirect","Component","RedirectComponent","this","props","to","React","connect","initialState","posts","id","text","likes","dislikes","like","dislike","profile","status","isFetching","newPostText","addPost","type","setFetching","setStatus","toggleLike","toggleDislike","getUserProfile","userId","dispatch","a","profileAPI","response","getUserStatus","getStatus","updateStatus","data","resultCode","uploadAvatar","file","photos","updateProfile","getState","stopSubmit","_error","messages","Promise","reject","profileReducer","action","newPost","filter","p","map","dialogs","name","avatar","avatar1","avatar2","avatar3","avatar4","avatar5","avatar6","message","addMessage","newMessageText","messagesReducer","newMessage","module","exports","instance","axios","withCredentials","baseURL","headers","usersAPI","getUsers","currentPage","pageSize","get","then","follow","post","unfollow","delete","getFriends","put","formData","FormData","append","authAPI","me","login","email","password","remember","captcha","logout","securityAPI","getCaptchaUrl","Boolean","window","location","hostname","match","users","totalUsersCount","currentPagiNumber","followInProgress","followSuccess","unfollowSuccess","setTotalUsersCount","setActivePage","page","toggleFollow","followToggle","apiMethod","actionCreator","usersReducer","u","followed","Paginator","onPageChanged","pagiSize","pagesCount","Math","ceil","pages","i","push","pagiCount","useState","pagiNumber","setPagiNumber","leftPagi","rightPagi","className","cl","pagination","Button","pagi_button","variant","color","onClick","key","pagi_active","pagi","User","user","card","card__left","src","small","alt","button","disabled","some","info","Users","showmore","button_more","size","getIsFetching","usersPage","getUsersReselect","createSelector","getPageSize","getTotalUsersCount","getCurrentPage","getCurrentPagiNumber","getFollowInProgress","UsersContainer","requestUsers","Preloader","compose","bind","items","totalCount","Header","header","logo","brand","login_block","button_wrap","button_logout","captchaUrl","setAuthUserData","payload","getCaptchaUrlSuccess","getAuthUserData","getCaptchaURL","url","authReducer","Navbar","friendsElements","sidebar","friends","fr","friends_item","friends_avatar","friends_name","nav","nav__ul","nav__li","active","activeClassName","nav__li_users","friends_title","friends_count","totalFriendsCount","friends_list","setFriends","setTotalFriendsCount","sidebarReducer","NavbarContainer","randomFriends","temp","index","shuffled","slice","length","floor","random","shuffleArray","News","news","Music","music","Settings","settings","renderTextField","label","input","meta","touched","invalid","error","custom","TextField","placeholder","helperText","renderCheckbox","FormControlLabel","control","Checkbox","checked","value","onChange","LoginReduxForm","reduxForm","form","validate","values","errors","forEach","field","onSubmit","handleSubmit","input_field","Field","component","submitFailed","summary_error","input_captcha","startIcon","initialized","appReducer","reducers","combineReducers","app","profilePage","messagesPage","formReducer","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","createStore","applyMiddleware","thunkMiddleware","__store__","DialogsContainer","lazy","ProfileContainer","theme","createMuiTheme","palette","primary","blue","secondary","pink","App","catchAllUnhandledErrors","promiseRejectionEvent","alert","console","initializeApp","addEventListener","removeEventListener","isProfile","pathname","indexOf","ThemeProvider","path","exact","render","fallback","Login","AppContainer","withRouter","dispatchResult","all","SocialNetworkApp","StrictMode","basename","process","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","preloader_wrap"],"mappings":"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","file":"static/js/main.4850b439.chunk.js","sourcesContent":["import React from 'react'\r\nimport {Redirect} from 'react-router-dom'\r\nimport {connect} from 'react-redux'\r\n\r\nlet mapStateToPropsForRedirect = (state) => ({\r\n\tisAuth: state.auth.isAuth\r\n})\r\n\r\nexport const withAuthRedirect = (Component) => {\r\n\tclass RedirectComponent extends React.Component {\r\n\t\trender() {\r\n\t\t\tif (!this.props.isAuth) {\r\n\t\t\t\treturn <Redirect to='/login' />\r\n\t\t\t}\r\n\r\n\t\t\treturn <Component {...this.props} />\r\n\t\t}\r\n\t}\r\n\r\n\treturn connect(mapStateToPropsForRedirect)(RedirectComponent)\r\n}","import {profileAPI} from '../api/api'\r\nimport {stopSubmit} from 'redux-form'\r\nimport {PhotosType, PostType, ProfileType} from '../types/types'\r\n\r\nconst ADD_POST          = 'ADD_POST'\r\nconst SET_USERS_PROFILE = 'SET_USERS_PROFILE'\r\nconst TOGGLE_FETCHING   = 'TOGGLE_FETCHING'\r\nconst SET_STATUS        = 'SET_STATUS'\r\nconst DELETE_POST       = 'DELETE_POST'\r\nconst TOGGLE_LIKE       = 'TOGGLE_LIKE'\r\nconst TOGGLE_DISLIKE    = 'TOGGLE_DISLIKE'\r\nconst SAVE_AVATAR       = 'SAVE_AVATAR'\r\n\r\nlet initialState = {\r\n\tposts: [\r\n\t\t{id: 1, text: 'First post', likes: 2, dislikes: 0, like: false, dislike: false},\r\n\t\t{id: 2, text: 'Hi', likes: 23, dislikes: 1, like: false, dislike: false}\r\n\t] as Array<PostType>,\r\n\tprofile: null as ProfileType | null,\r\n\tstatus: '',\r\n\tisFetching: true,\r\n\tnewPostText: ''\r\n}\r\nexport type InitialStateType = typeof initialState\r\n\r\nconst profileReducer = (state = initialState, action: any): InitialStateType => {\r\n\tswitch(action.type) {\r\n\t\tcase ADD_POST:\r\n\t\t\tlet newPost = {\r\n\t\t\t\tid: 5,\r\n\t\t\t\ttext: action.newPostText,\r\n\t\t\t\tlikes: 0,\r\n\t\t\t\tdislikes: 0,\r\n\t\t\t\tlike: false,\r\n\t\t\t\tdislike: false\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tposts: [...state.posts, newPost],\r\n\t\t\t\tnewPostText: ''\r\n\t\t\t}\r\n\r\n\t\tcase SET_STATUS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tstatus: action.status\r\n\t\t\t}\r\n\r\n\t\tcase SET_USERS_PROFILE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tprofile: action.profile\r\n\t\t\t}\r\n\r\n\t\tcase TOGGLE_FETCHING:\r\n\t\t\treturn {...state, isFetching: action.isFetching}\r\n\r\n\t\tcase DELETE_POST:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tposts: state.posts.filter(p =>\r\n\t\t\t\t\tp.id !== action.id\r\n\t\t\t\t)\r\n\t\t\t}\r\n\r\n\t\tcase SAVE_AVATAR:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tprofile: {...state.profile, photos: action.photos} as ProfileType\r\n\t\t\t}\r\n\r\n\t\tcase TOGGLE_LIKE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tposts: state.posts.map(p => {\r\n\t\t\t\t\tif (p.id === action.id) {\r\n\t\t\t\t\t\tif (p.like) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t...p,\r\n\t\t\t\t\t\t\t\tlike: false,\r\n\t\t\t\t\t\t\t\tlikes: p.likes - 1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t...p,\r\n\t\t\t\t\t\t\t\tlike: true,\r\n\t\t\t\t\t\t\t\tdislike: false,\r\n\t\t\t\t\t\t\t\tlikes: p.likes + 1,\r\n\t\t\t\t\t\t\t\tdislikes: p.dislike ? p.dislikes - 1 : p.dislikes\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn p\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\tcase TOGGLE_DISLIKE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tposts: state.posts.map(p => {\r\n\t\t\t\t\tif (p.id === action.id) {\r\n\t\t\t\t\t\tif (p.dislike) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t...p,\r\n\t\t\t\t\t\t\t\tdislike: false,\r\n\t\t\t\t\t\t\t\tdislikes: p.dislikes - 1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t...p,\r\n\t\t\t\t\t\t\t\tlike: false,\r\n\t\t\t\t\t\t\t\tdislike: true,\r\n\t\t\t\t\t\t\t\tdislikes: p.dislikes + 1,\r\n\t\t\t\t\t\t\t\tlikes: p.like ? p.likes - 1 : p.likes\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn p\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\ntype AddPostType = {\r\n\ttype: typeof ADD_POST\r\n\tnewPostText: string\r\n}\r\ntype SetUserProfileType = {\r\n\ttype: typeof SET_USERS_PROFILE\r\n\tprofile: ProfileType\r\n}\r\ntype SetStatusType = {\r\n\ttype: typeof SET_STATUS\r\n\tstatus: string\r\n}\r\ntype DeletePostType = {\r\n\ttype: typeof DELETE_POST\r\n\tid: number\r\n}\r\ntype SaveAvatarSuccessType = {\r\n\ttype: typeof SAVE_AVATAR\r\n\tphotos: PhotosType\r\n}\r\ntype ToggleLikeType = {\r\n\ttype: typeof TOGGLE_LIKE\r\n\tid: number\r\n}\r\ntype ToggleDislikeType = {\r\n\ttype: typeof TOGGLE_DISLIKE\r\n\tid: number\r\n}\r\ntype SetFetchingType = {\r\n\ttype: typeof TOGGLE_FETCHING\r\n\tisFetching: boolean\r\n}\r\n\r\n// ACTION CREATORS\r\nexport const addPost = (newPostText: string): AddPostType => ({ type: ADD_POST, newPostText })\r\nexport const deletePost = (id: number): DeletePostType => ({ type: DELETE_POST, id })\r\nexport const setUserProfile = (profile: ProfileType): SetUserProfileType => ({ type: SET_USERS_PROFILE, profile })\r\nexport const setFetching = (isFetching: boolean): SetFetchingType => ({ type: TOGGLE_FETCHING, isFetching })\r\nexport const setStatus = (status: string): SetStatusType => ({ type: SET_STATUS, status })\r\nexport const toggleLike = (id: number): ToggleLikeType => ({ type: TOGGLE_LIKE, id })\r\nexport const toggleDislike = (id: number): ToggleDislikeType => ({ type: TOGGLE_DISLIKE, id })\r\nexport const saveAvatarSuccess = (photos: PhotosType): SaveAvatarSuccessType => ({ type: SAVE_AVATAR, photos })\r\n\r\n// THUNK CREATORS\r\nexport const getUserProfile = (userId: number) =>  async (dispatch: any) => {\r\n\tdispatch(setFetching(true))\r\n\tconst response = await profileAPI.getUserProfile(userId)\r\n\tdispatch(setUserProfile(response))\r\n\tdispatch(setFetching(false))\r\n}\r\n\r\nexport const getUserStatus = (userId: number) => async (dispatch: any) => {\r\n\tconst response = await profileAPI.getStatus(userId)\r\n\tdispatch(setStatus(response))\r\n}\r\n\r\nexport const updateStatus = (status: string) => async (dispatch: any) => {\r\n\ttry {\r\n\t\tconst response = await profileAPI.updateStatus(status)\r\n\t\tif (response.data.resultCode === 0) {\r\n\t\t\tdispatch(setStatus(status))\r\n\t\t}\r\n\t} catch(error) {\r\n\r\n\t}\r\n}\r\n\r\nexport const uploadAvatar = (file: any) => async (dispatch: any) => {\r\n\tconst response = await profileAPI.uploadAvatar(file)\r\n\tif (response.data.resultCode === 0) {\r\n\t\tdispatch(saveAvatarSuccess(response.data.data.photos))\r\n\t}\r\n}\r\n\r\nexport const updateProfile = (profile: ProfileType) => async (dispatch: any, getState: any) => {\r\n\tconst userId = getState().auth.userId\r\n\tconst response = await profileAPI.updateProfile(profile)\r\n\tif (response.data.resultCode === 0) {\r\n\t\tdispatch(getUserProfile(userId))\r\n\t} else {\r\n\t\tdispatch(stopSubmit('profile', {_error: response.data.messages[0]}))\r\n\t\treturn Promise.reject(response.data.messages[0])\r\n\t}\r\n}\r\n\r\nexport default profileReducer\r\n","import avatar1 from '../static/my.png'\r\nimport avatar2 from '../static/Screenshot_2.png'\r\nimport avatar3 from '../static/Screenshot_3.png'\r\nimport avatar4 from '../static/helena.jpg'\r\nimport avatar5 from '../static/Screenshot_5.png'\r\nimport avatar6 from '../static/Screenshot_6.png'\r\n\r\nconst ADD_MESSAGE = 'ADD_MESSAGE'\r\n\r\ntype DialogType = {\r\n  id: number,\r\n  name: string,\r\n  avatar: string\r\n}\r\n\r\ntype MessagesType = {\r\n  id: number,\r\n  message: string,\r\n  type: string\r\n}\r\n\r\nlet initialState = {\r\n  dialogs: [\r\n    {id: 1, name: 'Alexander', avatar: avatar1},\r\n    {id: 2, name: 'Victor', avatar: avatar2},\r\n    {id: 3, name: 'John', avatar: avatar3},\r\n    {id: 4, name: 'Helena', avatar: avatar4},\r\n    {id: 5, name: 'Tony', avatar: avatar5},\r\n    {id: 6, name: 'Michael', avatar: avatar6}\r\n  ] as Array<DialogType>,\r\n  messages: [\r\n    {id: 1, message: 'Hi', type: 'incoming'},\r\n    {id: 2, message: 'Hello', type: 'outcoming'},\r\n    {id: 3, message: 'Ok!', type: 'incoming'},\r\n    {id: 4, message: 'Good bye', type: 'outcoming'},\r\n    {id: 5, message: '100%', type: 'incoming'},\r\n    {id: 6, message: 'Yo', type: 'outcoming'}\r\n  ] as Array<MessagesType>\r\n}\r\n\r\nexport type InitialStateType = typeof initialState\r\n\r\nconst messagesReducer = (state = initialState, action: any): InitialStateType => {\r\n  switch (action.type) {\r\n    case ADD_MESSAGE:\r\n      let newMessage = {\r\n        id: 7,\r\n        message: action.newMessageText,\r\n        type: 'incoming'\r\n      }\r\n      return {\r\n        ...state,\r\n        messages: [...state.messages, newMessage]\r\n      }\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\ntype addMessageType = {\r\n  type: typeof ADD_MESSAGE\r\n  newMessageText: string\r\n}\r\n\r\nexport const addMessage = (newMessageText: string): addMessageType => ({ type: ADD_MESSAGE, newMessageText })\r\n\r\nexport default messagesReducer\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__mPHz4\",\"nav__ul\":\"Navbar_nav__ul___Wdvm\",\"nav__li\":\"Navbar_nav__li__3zbpa\",\"nav__li_users\":\"Navbar_nav__li_users__1LYrp\",\"active\":\"Navbar_active__Pdizy\",\"friends\":\"Navbar_friends__PhlxP\",\"friends_list\":\"Navbar_friends_list__2Xi3S\",\"friends_avatar\":\"Navbar_friends_avatar__3aujU\",\"friends_item\":\"Navbar_friends_item__6QViX\",\"friends_title\":\"Navbar_friends_title__3vmLE\",\"friends_name\":\"Navbar_friends_name__3_R0Z\",\"friends_count\":\"Navbar_friends_count__1rlDZ\"};","module.exports = __webpack_public_path__ + \"static/media/preloader.26dcc48c.gif\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preloader_wrap\":\"Preloader_preloader_wrap__2K_Eb\"};","module.exports = __webpack_public_path__ + \"static/media/178.d05a41d9.gif\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"news\":\"News_news__2Obhi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"music\":\"Music_music__2qfFp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"settings\":\"Settings_settings__2Ma6h\"};","module.exports = __webpack_public_path__ + \"static/media/my.586e6b99.png\";","module.exports = __webpack_public_path__ + \"static/media/Screenshot_2.e2849d3c.png\";","module.exports = __webpack_public_path__ + \"static/media/Screenshot_3.86f596a9.png\";","module.exports = __webpack_public_path__ + \"static/media/helena.1b106820.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Screenshot_5.42e1719b.png\";","module.exports = __webpack_public_path__ + \"static/media/Screenshot_6.f5ed4860.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"users\":\"Users_users__3-FFG\",\"avatar\":\"Users_avatar__35Qak\",\"info\":\"Users_info__2BRvL\",\"name\":\"Users_name__1KhPj\",\"card\":\"Users_card__1CGl8\",\"card__left\":\"Users_card__left__1fwRm\",\"status\":\"Users_status__25-ll\",\"location\":\"Users_location__1HiKE\",\"showmore\":\"Users_showmore__2dLWk\",\"button\":\"Users_button__dNBIf\",\"pagination\":\"Users_pagination__2rYmF\",\"pagi_active\":\"Users_pagi_active__QeygC\",\"pagi\":\"Users_pagi__dPTaQ\",\"pagi_button\":\"Users_pagi_button__3Uoqo\"};","import * as axios from 'axios'\r\n\r\nconst instance = axios.create({\r\n\twithCredentials: true,\r\n\tbaseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n\theaders: {\r\n\t\t'API-KEY': '2f779481-db2c-495a-9bc1-00ac4d4dad77'\r\n\t}\r\n})\r\n\r\nexport const usersAPI = {\r\n\tgetUsers(currentPage = 1, pageSize = 5) {\r\n\t\treturn (\r\n\t\t\tinstance.get(`users?page=${currentPage}&count=${pageSize}`)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data\r\n\t\t\t\t})\r\n\t\t)\r\n\t},\r\n\tfollow(userId) {\r\n\t\treturn (\r\n\t\t\tinstance.post(`follow/${userId}`)\r\n\t\t)\r\n\t},\r\n\tunfollow(userId) {\r\n\t\treturn (\r\n\t\t\tinstance.delete(`follow/${userId}`)\r\n\t\t)\r\n\t},\r\n\tgetFriends() {\r\n\t\treturn (\r\n\t\t\tinstance.get(`users`)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data\r\n\t\t\t\t})\r\n\t\t)\r\n\t},\r\n}\r\n\r\nexport const profileAPI = {\r\n\tgetUserProfile(id) {\r\n\t\treturn (\r\n\t\t\tinstance.get(`profile/${id}`)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data\r\n\t\t\t\t})\r\n\t\t)\r\n\t},\r\n\tgetStatus(id) {\r\n\t\treturn (\r\n\t\t\tinstance.get(`profile/status/${id}`)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data\r\n\t\t\t\t})\r\n\t\t)\r\n\t},\r\n\tupdateStatus(status) {\r\n\t\treturn (\r\n\t\t\tinstance.put(`profile/status`, { status: status })\r\n\t\t)\r\n\t},\r\n\tuploadAvatar(file) {\r\n\t\tconst formData = new FormData()\r\n\t\tformData.append('image', file)\r\n\t\treturn (\r\n\t\t\tinstance.put(`profile/photo`, formData)\r\n\t\t)\r\n\t},\r\n\tupdateProfile(profile) {\r\n\t\treturn (\r\n\t\t\tinstance.put(`profile`, profile)\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport const authAPI = {\r\n\tme() {\r\n\t\treturn (\r\n\t\t\tinstance.get(`auth/me`)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\treturn response.data\r\n\t\t\t\t})\r\n\t\t)\r\n\t},\r\n\tlogin(email, password, remember = false, captcha = null) {\r\n\t\treturn (\r\n\t\t\tinstance.post(`auth/login`, {email, password, remember, captcha})\r\n\t\t)\r\n\t},\r\n\tlogout() {\r\n\t\treturn (\r\n\t\t\tinstance.delete(`auth/login`)\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport const securityAPI = {\r\n\tgetCaptchaUrl() {\r\n\t\treturn (\r\n\t\t\tinstance.get(`security/get-captcha-url`)\r\n\t\t)\r\n\t}\r\n}\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister()\n      })\n      .catch(error => {\n        console.error(error.message)\n      })\n  }\n}\n","import {usersAPI} from '../api/api'\r\nimport {UserType} from '../types/types'\r\n\r\nconst FOLLOW    = 'FOLLOW'\r\nconst UNFOLLOW  = 'UNFOLLOW'\r\nconst SET_USERS = 'SET_USERS'\r\nconst SET_TOTAL_USERS = 'SET_TOTAL_USERS'\r\nconst SET_ACTIVE_PAGE = 'SET_ACTIVE_PAGE'\r\nconst TOGGLE_FETCHING = 'TOGGLE_FETCHING'\r\nconst FOLLOW_IN_PROGRESS = 'FOLLOW_IN_PROGRESS'\r\nconst SET_ACTIVE_PAGI_NUMBER = 'SET_ACTIVE_PAGI_NUMBER'\r\n\r\nlet initialState = {\r\n\tusers: [] as Array<UserType>,\r\n\tpageSize: 5,\r\n\ttotalUsersCount: 0,\r\n\tcurrentPage: 1,\r\n\tcurrentPagiNumber: 1,\r\n\tisFetching: true,\r\n\tfollowInProgress: [] as Array<number> // array of users id\r\n}\r\n\r\ntype InitialStateType = typeof initialState\r\n\r\nconst usersReducer = (state = initialState, action: any): InitialStateType => {\r\n\tswitch(action.type) {\r\n\t\tcase FOLLOW:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers: state.users.map(u => {\r\n\t\t\t\t\tif (u.id === action.userId) {\r\n\t\t\t\t\t\treturn {...u, followed: true}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn u\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\tcase UNFOLLOW:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers: state.users.map(u => {\r\n\t\t\t\t\tif (u.id === action.userId) {\r\n\t\t\t\t\t\treturn {...u, followed: false}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn u\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\tcase SET_USERS:\r\n\t\t\treturn {...state, users: action.users}\r\n\r\n\t\tcase SET_TOTAL_USERS:\r\n\t\t\treturn {...state, totalUsersCount: action.users}\r\n\r\n\t\tcase SET_ACTIVE_PAGE:\r\n\t\t\treturn {...state, currentPage: action.page}\r\n\r\n\t\tcase SET_ACTIVE_PAGI_NUMBER:\r\n\t\t\treturn {...state, currentPagiNumber: action.page}\r\n\r\n\t\tcase TOGGLE_FETCHING:\r\n\t\t\treturn {...state, isFetching: action.isFetching}\r\n\r\n\t\tcase FOLLOW_IN_PROGRESS:\r\n\t\t\treturn {...state, followInProgress: action.isFetching\r\n\t\t\t\t\t? [...state.followInProgress, action.userId]\r\n\t\t\t\t\t: state.followInProgress.filter(id => id !== action.userId)\r\n\t\t\t}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\n// ACTION CREATORS\r\ntype FollowSuccessType = {\r\n\ttype: typeof FOLLOW\r\n\tuserId: number\r\n}\r\nexport const followSuccess = (userId: number): FollowSuccessType => ({ type: FOLLOW, userId })\r\ntype UnfollowSuccessType = {\r\n\ttype: typeof UNFOLLOW\r\n\tuserId: number\r\n}\r\nexport const unfollowSuccess = (userId: number): UnfollowSuccessType => ({ type: UNFOLLOW, userId })\r\ntype SetUsersType = {\r\n\ttype: typeof SET_USERS\r\n\tusers: Array<UserType>\r\n}\r\nexport const setUsers = (users: Array<UserType>): SetUsersType => ({ type: SET_USERS, users })\r\ntype SetTotalUsersCountType = {\r\n\ttype: typeof SET_TOTAL_USERS\r\n\tusers: number\r\n}\r\nexport const setTotalUsersCount = (users: number): SetTotalUsersCountType => ({ type: SET_TOTAL_USERS, users })\r\ntype SetActivePageType = {\r\n\ttype: typeof SET_ACTIVE_PAGE\r\n\tpage: number\r\n}\r\nexport const setActivePage = (page: number): SetActivePageType => ({ type: SET_ACTIVE_PAGE, page })\r\ntype SetActivePagiNumberType = {\r\n\ttype: typeof SET_ACTIVE_PAGI_NUMBER\r\n\tpage: number\r\n}\r\nexport const setActivePagiNumber = (page: number): SetActivePagiNumberType => ({ type: SET_ACTIVE_PAGI_NUMBER, page })\r\ntype SetFetchingType = {\r\n\ttype: typeof TOGGLE_FETCHING\r\n\tisFetching: boolean\r\n}\r\nexport const setFetching = (isFetching: boolean): SetFetchingType => ({ type: TOGGLE_FETCHING, isFetching })\r\ntype ToggleFollowType = {\r\n\ttype: typeof FOLLOW_IN_PROGRESS\r\n\tisFetching: boolean\r\n\tuserId: number\r\n}\r\nexport const toggleFollow = (isFetching: boolean, userId: number): ToggleFollowType => ({ type: FOLLOW_IN_PROGRESS, isFetching, userId })\r\n\r\n// THUNK CREATORS\r\nexport const requestUsers = (currentPage: number, pageSize: number, currentPagiNumber: number) => async (dispatch: any) => {\r\n\tdispatch(setFetching(true))\r\n\tdispatch(setActivePage(currentPage))\r\n\tdispatch(setActivePagiNumber(currentPagiNumber))\r\n\r\n\tlet response = await usersAPI.getUsers(currentPage, pageSize)\r\n\tdispatch(setUsers(response.items))\r\n\tdispatch(setFetching(false))\r\n\tdispatch(setTotalUsersCount(response.totalCount))\r\n}\r\n\r\nconst followToggle = async (dispatch: any, id: number, apiMethod: any, actionCreator: any) => {\r\n\tdispatch(toggleFollow(true, id))\r\n\tlet response = await apiMethod(id)\r\n\tif (response.data.resultCode === 0) {\r\n\t\tdispatch(actionCreator(id))\r\n\t}\r\n\tdispatch(toggleFollow(false, id))\r\n}\r\nexport const follow = (id: number) => (dispatch: any) => {\r\n\tfollowToggle(dispatch, id, usersAPI.follow.bind(id), followSuccess)\r\n}\r\nexport const unfollow = (id: number) => (dispatch:any) => {\r\n\tfollowToggle(dispatch, id, usersAPI.unfollow.bind(id), unfollowSuccess)\r\n}\r\n\r\nexport default usersReducer\r\n","import React, {useState} from 'react'\r\nimport cl from './Users.module.css'\r\nimport Button from '@material-ui/core/Button'\r\n\r\nconst Paginator = ({totalUsersCount, pageSize, currentPage, onPageChanged, pagiSize = 10, currentPagiNumber}) => {\r\n\tlet pagesCount = Math.ceil(totalUsersCount / pageSize)\r\n\tlet pages = []\r\n\tfor (let i = 1; i <= pagesCount; i++) {\r\n\t\tpages.push(i)\r\n\t}\r\n\r\n\tlet pagiCount = Math.ceil(pagesCount / pagiSize)\r\n\tlet [pagiNumber, setPagiNumber] = useState(currentPagiNumber)\r\n\tlet leftPagi = (pagiNumber - 1) * pagiSize + 1\r\n\tlet rightPagi = pagiNumber * pagiSize\r\n\r\n\treturn (\r\n\t\t<div className={cl.pagination}>\r\n\t\t\t{ pagiNumber > 1 &&\r\n\t\t\t\t<Button\r\n\t\t\t\t\tclassName={cl.pagi_button}\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tonClick={() => setPagiNumber(pagiNumber - 1)}\r\n\t\t\t\t>\r\n\t\t\t\t\tPrev {pagiSize}\r\n\t\t\t\t</Button>\r\n\t\t\t}\r\n\t\t\t{\r\n\t\t\t\tpages\r\n\t\t\t\t\t.filter(page => page >= leftPagi && page <= rightPagi)\r\n\t\t\t\t\t.map(page =>\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tkey={page}\r\n\t\t\t\t\t\tclassName={`${currentPage === page ? cl.pagi_active : ''} ${cl.pagi}`}\r\n\t\t\t\t\t\tonClick = {() => onPageChanged(page, pagiNumber)}\r\n\t\t\t\t\t>{page}</span>\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\t{ pagiCount > pagiNumber &&\r\n\t\t\t\t<Button\r\n\t\t\t\t\tclassName={cl.pagi_button}\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tonClick={() => setPagiNumber(pagiNumber + 1)}\r\n\t\t\t\t>\r\n\t\t\t\t\tNext {pagiSize}\r\n\t\t\t\t</Button>\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Paginator","import React from 'react'\r\nimport cl from './../Users.module.css'\r\nimport {NavLink} from 'react-router-dom'\r\nimport Button from '@material-ui/core/Button'\r\nimport avatar from '../../../static/avatar.png'\r\n\r\nlet User = ({user, followInProgress, unfollow, follow}) => {\r\n\treturn (\r\n\t\t<div className={cl.card}>\r\n\t\t\t<div className={cl.card__left}>\r\n\t\t\t\t<div className={cl.avatar}>\r\n\t\t\t\t\t<NavLink to={'/profile/' + user.id}>\r\n\t\t\t\t\t\t<img src={user.photos.small != null ? user.photos.small : avatar} alt=\"\"/>\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor={user.followed ? 'secondary' : 'primary'}\r\n\t\t\t\t\tclassName={cl.button}\r\n\t\t\t\t\tdisabled={followInProgress.some(id => id === user.id)}\r\n\t\t\t\t\tonClick={user.followed\r\n\t\t\t\t\t\t? () => {\r\n\t\t\t\t\t\t\tunfollow(user.id)\r\n\t\t\t\t\t\t} : () => {\r\n\t\t\t\t\t\t\tfollow(user.id)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{user.followed ? 'unfollow' : 'follow'}\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t\t<div className={cl.info}>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div className={cl.name}>\r\n\t\t\t\t\t\t{user.name}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className={cl.status}>\r\n\t\t\t\t\t\t{user.status}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default User\r\n","import React from 'react'\r\nimport cl from './Users.module.css'\r\nimport Button from '@material-ui/core/Button'\r\nimport Paginator from './Paginator'\r\nimport User from './User/User'\r\n\r\nlet Users = (props) => {\r\n\r\n\tconst showMore = () => {\r\n\t\tlet pagiNumber = props.currentPage % 10 === 0 ? props.currentPagiNumber + 1 : props.currentPagiNumber\r\n\t\tprops.onPageChanged(props.currentPage + 1, pagiNumber)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={cl.users}>\r\n\t\t\t<Paginator\r\n\t\t\t\tcurrentPage={props.currentPage} onPageChanged={props.onPageChanged}\r\n\t\t\t\ttotalUsersCount={props.totalUsersCount} pageSize={props.pageSize}\r\n\t\t\t\tcurrentPagiNumber={props.currentPagiNumber}\r\n\t\t\t/>\r\n\t\t\t{\r\n\t\t\t\tprops.users.map(u =>\r\n\t\t\t\t\t<User\r\n\t\t\t\t\t\tuser={u} followInProgress={props.followInProgress}\r\n\t\t\t\t\t\tunfollow={props.unfollow} follow={props.follow} key={u.id}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\t<div className={cl.showmore}>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tclassName={cl.button_more}\r\n\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\tonClick={showMore}\r\n\t\t\t\t>\r\n\t\t\t\t\tShow next\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Users\r\n","import {createSelector} from 'reselect'\r\n\r\nexport const getUsers = (state) => {\r\n\treturn state.usersPage.users\r\n}\r\nexport const getIsFetching = (state) => {\r\n\treturn state.usersPage.isFetching\r\n}\r\nexport const getUsersReselect = createSelector(getUsers,\r\n\t(users) => {\r\n\treturn users\r\n})\r\n\r\nexport const getPageSize = (state) => {\r\n\treturn state.usersPage.pageSize\r\n}\r\n\r\nexport const getTotalUsersCount = (state) => {\r\n\treturn state.usersPage.totalUsersCount\r\n}\r\n\r\nexport const getCurrentPage = (state) => {\r\n\treturn state.usersPage.currentPage\r\n}\r\n\r\nexport const getCurrentPagiNumber = (state) => {\r\n\treturn state.usersPage.currentPagiNumber\r\n}\r\n\r\nexport const getFollowInProgress = (state) => {\r\n\treturn state.usersPage.followInProgress\r\n}\r\n","import React from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {\r\n\tfollow, requestUsers, setActivePage, toggleFollow, unfollow\r\n} from '../../redux/usersReducer'\r\nimport Users from './Users'\r\nimport Preloader from '../common/Preloader/Preloader'\r\nimport {withAuthRedirect} from '../../hoc/withAuthRedirect'\r\nimport {compose} from 'redux'\r\nimport {\r\n\tgetCurrentPage, getCurrentPagiNumber, getFollowInProgress, getIsFetching,\r\n\tgetPageSize, getTotalUsersCount, getUsersReselect\r\n} from '../../redux/usersSelectors'\r\n\r\nclass UsersContainer extends React.Component {\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.requestUsers(this.props.currentPage, this.props.pageSize, this.props.currentPagiNumber)\r\n\t}\r\n\r\n\tonPageChanged = (page, pagiNumber) => {\r\n\t\tthis.props.requestUsers(page, this.props.pageSize, pagiNumber)\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.props.isFetching\r\n\t\t\t\t\t\t? <Preloader />\r\n\t\t\t\t\t\t: <Users\r\n\t\t\t\t\t\t\t\ttotalUsersCount={this.props.totalUsersCount}\r\n\t\t\t\t\t\t\t\tcurrentPage={this.props.currentPage}\r\n\t\t\t\t\t\t\t\tpageSize={this.props.pageSize}\r\n\t\t\t\t\t\t\t\tcurrentPagiNumber={this.props.currentPagiNumber}\r\n\t\t\t\t\t\t\t\tonPageChanged={this.onPageChanged}\r\n\t\t\t\t\t\t\t\tusers={this.props.users}\r\n\t\t\t\t\t\t\t\tfollow={this.props.follow}\r\n\t\t\t\t\t\t\t\tunfollow={this.props.unfollow}\r\n\t\t\t\t\t\t\t\tfollowInProgress={this.props.followInProgress}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nlet mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tusers: getUsersReselect(state),\r\n\t\tpageSize: getPageSize(state),\r\n\t\ttotalUsersCount: getTotalUsersCount(state),\r\n\t\tcurrentPage: getCurrentPage(state),\r\n\t\tcurrentPagiNumber: getCurrentPagiNumber(state),\r\n\t\tisFetching: getIsFetching(state),\r\n\t\tfollowInProgress: getFollowInProgress(state)\r\n\t}\r\n}\r\n\r\nexport default compose(\r\n\tconnect(mapStateToProps,\r\n\t\t{follow, unfollow, setActivePage,\ttoggleFollow, requestUsers}),\r\n\twithAuthRedirect\r\n)(UsersContainer)\r\n","import React from 'react'\r\nimport cl from './Header.module.css'\r\nimport logo from '../../static/178.gif'\r\nimport {NavLink} from 'react-router-dom'\r\nimport Button from '@material-ui/core/Button'\r\n\r\nconst Header = (props) => {\r\n\treturn (\r\n\t\t<header className={cl.header}>\r\n\t\t\t<img src={logo} alt=\"\" className={cl.logo}/>\r\n\t\t\t<div className={cl.brand}>\r\n\t\t\t\tvFacebooke\r\n\t\t\t</div>\r\n\t\t\t<div className={cl.login_block}>\r\n\t\t\t\t{(props.isAuth)\r\n\t\t\t\t\t? <div className={cl.button_wrap}>\r\n\t\t\t\t\t\t{props.login}\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tclassName={cl.button_logout}\r\n\t\t\t\t\t\t\tonClick={props.logout}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tLogout\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t: <NavLink to={'/login'}>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tclassName={cl.button}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tLogin\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</header>\r\n\t)\r\n}\r\n\r\nexport default Header\r\n","import {securityAPI, authAPI} from '../api/api'\r\nimport {stopSubmit} from 'redux-form'\r\nimport {IsFetchingType} from './appReducer'\r\n\r\nconst SET_USER_DATA   = 'auth/SET_USER_DATA'\r\nconst TOGGLE_FETCHING = 'auth/TOGGLE_FETCHING'\r\nconst GET_CAPTCHA_URL = 'auth/GET_CAPTCHA_URL'\r\n\r\nlet initialState = {\r\n\tuserId: null as number | null,\r\n\temail: null as string | null,\r\n\tlogin: null as string | null,\r\n\tisAuth: false,\r\n\tisFetching: true,\r\n\tcaptchaUrl: null as string | null\r\n}\r\n\r\nexport type InitialStateType = typeof initialState\r\n\r\nconst authReducer = (state = initialState, action: any): InitialStateType => {\r\n\tswitch(action.type) {\r\n\t\tcase SET_USER_DATA:\r\n\t\tcase GET_CAPTCHA_URL:\r\n\t\t\treturn {...state, ...action.payload}\r\n\r\n\t\tcase TOGGLE_FETCHING:\r\n\t\t\treturn {...state, isFetching: action.isFetching}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\n// ACTION CREATORS\r\ntype SetAuthUserDataPayloadType = {\r\n\tuserId: number | null\r\n\temail: string | null\r\n\tlogin: string | null\r\n\tisAuth: boolean\r\n}\r\ntype SetAuthUserDataType = {\r\n\ttype: typeof SET_USER_DATA,\r\n\tpayload: SetAuthUserDataPayloadType\r\n}\r\ntype GetCaptchaUrlSuccessType = {\r\n\ttype: typeof GET_CAPTCHA_URL\r\n\tpayload: {captchaUrl: string}\r\n}\r\n\r\nexport const setAuthUserData = (userId: number | null, email: string | null, login: string | null, isAuth: boolean): SetAuthUserDataType =>\r\n\t({ type: SET_USER_DATA, payload: {userId, email, login, isAuth} })\r\nexport const setFetching = (isFetching: IsFetchingType) => ({ type: TOGGLE_FETCHING, isFetching })\r\nexport const getCaptchaUrlSuccess = (captchaUrl: string): GetCaptchaUrlSuccessType => ({ type: GET_CAPTCHA_URL,  payload: {captchaUrl} })\r\n\r\n// THUNK CREATORS\r\nexport const getAuthUserData = () => async (dispatch: any) => {\r\n\tdispatch(setFetching(true))\r\n\tconst response = await authAPI.me()\r\n\tdispatch(setFetching(false))\r\n\tif (response.resultCode === 0) {\r\n\t\tlet {id, email, login} = response.data\r\n\t\tdispatch(setAuthUserData(id, email, login, true))\r\n\t}\r\n}\r\n\r\nexport const login = (email: string, password: string, remember: boolean, captcha: string) => async (dispatch: any) => {\r\n\tdispatch(setFetching(true))\r\n\tconst response = await authAPI.login(email, password, remember, captcha)\r\n\tdispatch(setFetching(false))\r\n\tif (response.data.resultCode === 0) {\r\n\t\tdispatch(getAuthUserData())\r\n\t} else {\r\n\t\tif (response.data.resultCode === 10) {\r\n\t\t\tdispatch(getCaptchaURL())\r\n\t\t}\r\n\r\n\t\tlet message = response.data.messages.length > 0 ? response.data.messages[0] : 'Unknown error'\r\n\t\tdispatch(stopSubmit('login', {_error: message}))\r\n\t}\r\n}\r\n\r\nexport const getCaptchaURL = () => async (dispatch: any) => {\r\n\tdispatch(setFetching(true))\r\n\tconst response = await securityAPI.getCaptchaUrl()\r\n\tdispatch(setFetching(false))\r\n\tconst captchaUrl = response.data.url\r\n\tdispatch(getCaptchaUrlSuccess(captchaUrl))\r\n}\r\n\r\nexport const logout = () => async (dispatch: any) => {\r\n\tdispatch(setFetching(true))\r\n\tconst response = await authAPI.logout()\r\n\tdispatch(setFetching(false))\r\n\tif (response.data.resultCode === 0) {\r\n\t\tdispatch(setAuthUserData(null, null, null, false))\r\n\t}\r\n}\r\n\r\nexport default authReducer\r\n","import React from 'react'\r\nimport Header from './Header'\r\nimport {connect} from 'react-redux'\r\nimport {logout} from '../../redux/authReducer'\r\nimport {compose} from 'redux'\r\n\r\nconst HeaderContainer = (props) => {\r\n\treturn (\r\n\t\t<Header {...props} />\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tisAuth: state.auth.isAuth,\r\n\tlogin: state.auth.login\r\n})\r\n\r\nexport default compose(\r\n\tconnect(mapStateToProps, {logout})\r\n)(HeaderContainer)\r\n\r\n","import React from 'react'\r\nimport cl from './Navbar.module.css'\r\nimport {NavLink} from 'react-router-dom'\r\nimport avatar from '../../static/avatar.png'\r\n\r\nconst Navbar = (props) => {\r\n\tlet friendsElements = props.sidebar.friends.map((fr) => {\r\n\t\treturn (\r\n\t\t\t<li className={cl.friends_item} key={fr.id}>\r\n\t\t\t\t<div className={cl.friends_avatar}>\r\n\t\t\t\t\t<img src={(!fr || fr.photos.small === null) ? avatar : fr.photos.small} alt=\"\"/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={cl.friends_name}>\r\n\t\t\t\t\t{fr.name}\r\n\t\t\t\t</div>\r\n\t\t\t</li>\r\n\t\t)\r\n\t})\r\n\r\n\treturn (\r\n\t\t<nav className={cl.nav}>\r\n\t\t\t<ul className={cl.nav__ul}>\r\n\t\t\t\t<li className={`${cl.nav__li} ${cl.active}`}>\r\n\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\tto=\"/profile\"\r\n\t\t\t\t\t\tactiveClassName={cl.active}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tProfile\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li className={cl.nav__li}>\r\n\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\tto=\"/dialogs\"\r\n\t\t\t\t\t\tactiveClassName={cl.active}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tMessages\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li className={cl.nav__li}>\r\n\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\tto=\"/news\"\r\n\t\t\t\t\t\tactiveClassName={cl.active}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tNews\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li className={cl.nav__li}>\r\n\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\tto=\"/music\"\r\n\t\t\t\t\t\tactiveClassName={cl.active}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tMusic\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li className={cl.nav__li}>\r\n\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\tto=\"/settings\"\r\n\t\t\t\t\t\tactiveClassName={cl.active}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tSettings\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li className={`${cl.nav__li} ${cl.nav__li_users}`}>\r\n\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\tto=\"/users\"\r\n\t\t\t\t\t\tactiveClassName={cl.active}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tUsers\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t\t<div className={cl.friends}>\r\n\t\t\t\t<h4 className={cl.friends_title}>Friends <span className={cl.friends_count}>{props.sidebar.totalFriendsCount}</span></h4>\r\n\t\t\t\t<ul className={cl.friends_list}>\r\n\t\t\t\t\t{friendsElements}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</nav>\r\n\t)\r\n}\r\n\r\nexport default Navbar\r\n","import {usersAPI} from '../api/api'\r\n\r\nconst SET_FRIENDS = 'SET_FRIENDS'\r\nconst SET_TOTAL_FRIENDS = 'SET_TOTAL_FRIENDS'\r\n\r\nlet initialState = {\r\n\tfriends: [],\r\n\ttotalFriendsCount: 0,\r\n}\r\n\r\nconst sidebarReducer = (state = initialState, action) => {\r\n\tswitch(action.type) {\r\n\t\tcase SET_FRIENDS:\r\n\t\t\treturn {...state, friends: action.friends}\r\n\r\n\t\tcase SET_TOTAL_FRIENDS:\r\n\t\t\treturn {...state, totalFriendsCount: action.friends}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\n// ACTION CREATORS\r\nexport const setFriends = (friends) => ({ type: SET_FRIENDS, friends })\r\nexport const setTotalFriendsCount = (friends) => ({ type: SET_TOTAL_FRIENDS, friends })\r\n\r\n// THUNK CREATORS\r\nexport const getFriends = () => async (dispatch) => {\r\n\tlet response = await usersAPI.getFriends()\r\n\tlet friends = response.items\r\n\tlet shuffleArray = () => {\r\n\t\tlet shuffled = friends.slice(0), i = friends.length, temp, index\r\n\t\twhile (i--) {\r\n\t\t\tindex = Math.floor((i + 1) * Math.random())\r\n\t\t\ttemp = shuffled[index]\r\n\t\t\tshuffled[index] = shuffled[i]\r\n\t\t\tshuffled[i] = temp\r\n\t\t}\r\n\t\treturn shuffled.slice(0, 3) // change random quantity friends here\r\n\t}\r\n\r\n\tlet randomFriends = shuffleArray()\r\n\r\n\tdispatch(setFriends(randomFriends))\r\n\tdispatch(setTotalFriendsCount(response.totalCount))\r\n}\r\n\r\nexport default sidebarReducer\r\n","import React from 'react'\r\nimport {connect} from 'react-redux'\r\nimport Navbar from './Navbar'\r\nimport {compose} from 'redux'\r\nimport {getFriends} from '../../redux/sidebarReducer'\r\n\r\nclass NavbarContainer extends React.Component {\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.getFriends()\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Navbar sidebar={this.props.sidebar} />\r\n\t\t)\r\n\t}\r\n}\r\n\r\nlet mapStateToProps = (state) => ({\r\n\tsidebar: state.sidebar\r\n})\r\n\r\nexport default compose(\r\n\tconnect(mapStateToProps, {getFriends})\r\n)(NavbarContainer)\r\n","import React from 'react'\r\nimport cl from './News.module.css'\r\n\r\nconst News = (props) => {\r\n  return (\r\n    <div className={ cl.news }>\r\n      News\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default News\r\n","import React from 'react'\r\nimport cl from './Music.module.css'\r\n\r\nconst Music = (props) => {\r\n  return (\r\n    <div className={ cl.music }>\r\n      Music\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Music\r\n","import React from 'react'\r\nimport cl from './Settings.module.css'\r\n\r\nconst Settings = (props) => {\r\n  return (\r\n    <div className={ cl.settings }>\r\n      Settings\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Settings\r\n","import React from 'react'\r\nimport Button from '@material-ui/core/Button'\r\nimport cl from './Login.module.css'\r\nimport {Field, reduxForm} from 'redux-form'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\nimport SupervisorAccountIcon from '@material-ui/icons/SupervisorAccount'\r\nimport {connect} from 'react-redux'\r\nimport {login} from '../../redux/authReducer'\r\nimport {Redirect} from 'react-router-dom'\r\n\r\nconst Login = (props) => {\r\n\tconst onSubmit = (formData) => {\r\n\t\tprops.login(formData.email, formData.password, formData.remember, formData.captcha)\r\n\t}\r\n\r\n\tif (props.isAuth) {\r\n\t\treturn <Redirect to={'/profile'} />\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<h1>Login</h1>\r\n\t\t\t<LoginReduxForm onSubmit={onSubmit} captchaUrl={props.captchaUrl} />\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst validate = values => {\r\n\tconst errors = {}\r\n\tconst requiredFields = [\r\n\t\t'email',\r\n\t\t'password'\r\n\t]\r\n\trequiredFields.forEach(field => {\r\n\t\tif (!values[field]) {\r\n\t\t\terrors[field] = 'Required'\r\n\t\t}\r\n\t})\r\n\treturn errors\r\n}\r\n\r\nconst renderTextField = ({\r\n\t\tlabel,\r\n\t\tinput,\r\n\t\tmeta: {touched, invalid, error},\r\n\t\t...custom\r\n\t}) => (\r\n\t<TextField\r\n\t\tlabel={label}\r\n\t\tplaceholder={label}\r\n\t\terror={touched && invalid}\r\n\t\thelperText={touched && error}\r\n\t\tvariant=\"outlined\"\r\n\t\t{...input}\r\n\t\t{...custom}\r\n\t/>\r\n)\r\n\r\nconst renderCheckbox = ({ input, label }) => (\r\n\t<div>\r\n\t\t<FormControlLabel\r\n\t\t\tcontrol={\r\n\t\t\t\t<Checkbox\r\n\t\t\t\t\tchecked={!!input.value}\r\n\t\t\t\t\tonChange={input.onChange}\r\n\t\t\t\t\tcolor={'primary'}\r\n\t\t\t\t/>\r\n\t\t\t}\r\n\t\t\tlabel={label}\r\n\t\t/>\r\n\t</div>\r\n)\r\n\r\nconst LoginForm = (props) => {\r\n\treturn (\r\n\t\t<form onSubmit={props.handleSubmit}>\r\n\t\t\t<div className={cl.input_field}>\r\n\t\t\t\t<Field name={'email'} label={'Login'} component={renderTextField} />\r\n\t\t\t</div>\r\n\t\t\t<div className={cl.input_field}>\r\n\t\t\t\t<Field name={'password'} label={'Password'} component={renderTextField} type={'password'} />\r\n\t\t\t</div>\r\n\t\t\t<div className={cl.input_field}>\r\n\t\t\t\t<Field name={'remember'} label={'Remember me'} component={renderCheckbox} type={'checkbox'} />\r\n\t\t\t</div>\r\n\r\n\t\t\t{\tprops.submitFailed &&\r\n\t\t\t\t<div className={`${cl.summary_error} ${cl.input_field}`}>\r\n\t\t\t\t\t{props.error}\r\n\t\t\t\t</div> }\r\n\t\t\t{props.captchaUrl && <div><img src={props.captchaUrl} alt=\"\" /></div>}\r\n\t\t\t{props.captchaUrl && <div className={cl.input_captcha}><Field name={'captcha'} label={'Enter a symbols'} component={renderTextField} /></div>\r\n\t\t\t}\r\n\r\n\t\t\t<div className={cl.input_field}>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tclassName={cl.button}\r\n\t\t\t\t\ttype={'submit'}\r\n\t\t\t\t\tstartIcon={<SupervisorAccountIcon/>}\r\n\t\t\t\t\t// disabled={validate.errors}\r\n\t\t\t\t>\r\n\t\t\t\t\tLogin\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t)\r\n}\r\n\r\nconst LoginReduxForm = reduxForm({\r\n\tform: 'login',\r\n\tvalidate\r\n})(LoginForm)\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tcaptchaUrl: state.auth.captchaUrl,\r\n\tisAuth: state.auth.isAuth\r\n})\r\n\r\nexport default connect(mapStateToProps, {login})(Login)\r\n","import {getAuthUserData} from './authReducer'\r\n\r\nconst SET_INITIALIZED = 'SET_INITIALIZED'\r\nconst TOGGLE_FETCHING = 'TOGGLE_FETCHING'\r\n\r\nexport type InitialStateType = {\r\n\tisFetching: boolean,\r\n\tinitialized: boolean\r\n}\r\ntype InitializedSuccessActionType = {\r\n\ttype: typeof SET_INITIALIZED\r\n}\r\nexport type IsFetchingType = boolean\r\nlet initialState: InitialStateType = {\r\n\tinitialized: false,\r\n\tisFetching: true\r\n}\r\n\r\nconst appReducer = (state = initialState, action: any): InitialStateType => {\r\n\tswitch(action.type) {\r\n\t\tcase SET_INITIALIZED:\r\n\t\t\treturn {...state, initialized: true}\r\n\r\n\t\tcase TOGGLE_FETCHING:\r\n\t\t\treturn {...state, isFetching: action.isFetching}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\n// ACTION CREATORS\r\nexport const setInitialingSuccess = (): InitializedSuccessActionType =>\r\n\t({ type: SET_INITIALIZED })\r\nexport const setFetching = (isFetching: IsFetchingType) => ({ type: TOGGLE_FETCHING, isFetching })\r\n\r\n\r\n// THUNK CREATORS\r\nexport const initializeApp = () => (dispatch: any) => {\r\n\tdispatch(setFetching(true))\r\n\tlet dispatchResult = dispatch(getAuthUserData())\r\n\r\n\tPromise.all([dispatchResult])\r\n\t\t.then(() => {\r\n\t\t\tdispatch(setInitialingSuccess())\r\n\t\t\tdispatch(setFetching(false))\r\n\t})\r\n}\r\n\r\nexport default appReducer\r\n","import {applyMiddleware, combineReducers, compose, createStore} from 'redux'\r\nimport profileReducer from './profileReducer'\r\nimport messagesReducer from './messagesReducer'\r\nimport sidebarReducer from './sidebarReducer'\r\nimport usersReducer from './usersReducer'\r\nimport authReducer from './authReducer'\r\nimport thunkMiddleware from 'redux-thunk'\r\nimport {reducer as formReducer} from 'redux-form'\r\nimport appReducer from './appReducer'\r\n\r\nlet reducers = combineReducers({\r\n\tapp: appReducer,\r\n\tprofilePage: profileReducer,\r\n\tmessagesPage: messagesReducer,\r\n\tsidebar: sidebarReducer,\r\n\tusersPage: usersReducer,\r\n\tauth: authReducer,\r\n\tform: formReducer\r\n})\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(thunkMiddleware)))\r\n\r\n// let store = createStore(reducers, applyMiddleware(thunkMiddleware))\r\n\r\nwindow.__store__ = store\r\n\r\nexport default store\r\n","import React, {Suspense} from 'react'\nimport {Redirect, BrowserRouter, Route, withRouter, Switch} from 'react-router-dom'\nimport './App.css'\nimport {ThemeProvider, createMuiTheme} from '@material-ui/core/styles'\nimport blue from '@material-ui/core/colors/blue'\nimport pink from '@material-ui/core/colors/pink'\nimport UsersContainer from './components/Users/UsersContainer'\nimport HeaderContainer from './components/Header/HeaderContainer'\nimport NavbarContainer from './components/Navbar/NavbarContainer'\nimport News from './components/News/News'\nimport Music from './components/Music/Music'\nimport Settings from './components/Settings/Settings'\nimport Login from './components/Login/Login'\nimport {compose} from 'redux'\nimport {connect, Provider} from 'react-redux'\nimport {initializeApp} from './redux/appReducer'\nimport Preloader from './components/common/Preloader/Preloader'\nimport store from './redux/redux-store'\nconst DialogsContainer = React.lazy(() => import('./components/Dialogs/DialogsContainer'))\nconst ProfileContainer = React.lazy(() => import('./components/Profile/ProfileContainer'))\n\nconst theme = createMuiTheme({\n\tpalette: {\n\t\tprimary: blue,\n\t\tsecondary: pink\n\t}\n})\n\nclass App extends React.Component {\n\n\tcatchAllUnhandledErrors = (promiseRejectionEvent) => {\n\t\talert(promiseRejectionEvent)\n\t\tconsole.error(promiseRejectionEvent)\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.props.initializeApp()\n\t\twindow.addEventListener('unhandledrejection', this.catchAllUnhandledErrors)\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('unhandledrejection', this.catchAllUnhandledErrors)\n\t}\n\n\trender() {\n\t\tif (!this.props.initialized) {\n\t\t\treturn <Preloader />\n\t\t}\n\t\tlet isProfile = window.location.pathname.indexOf('/profile') > 0 ? 'profile_content' : ''\n\n\t\treturn (\n\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t<div className=\"wrapper\">\n\t\t\t\t\t<HeaderContainer />\n\t\t\t\t\t<NavbarContainer />\n\t\t\t\t\t<main className={`${isProfile} content`}>\n\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t<Route path='/' exact>\n\t\t\t\t\t\t\t\t<Redirect to='/profile'/>\n\t\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\tpath=\"/profile/:userId?\"\n\t\t\t\t\t\t\t\trender={() => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<Suspense fallback={<Preloader />}>\n\t\t\t\t\t\t\t\t\t\t\t<ProfileContainer />\n\t\t\t\t\t\t\t\t\t\t</Suspense>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\texact path=\"/dialogs\"\n\t\t\t\t\t\t\t\trender={() => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<Suspense fallback={<Preloader />}>\n\t\t\t\t\t\t\t\t\t\t\t<DialogsContainer />\n\t\t\t\t\t\t\t\t\t\t</Suspense>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\tpath=\"/news\"\n\t\t\t\t\t\t\t\tcomponent={News}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\tpath=\"/music\"\n\t\t\t\t\t\t\t\tcomponent={Music}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\tpath=\"/settings\"\n\t\t\t\t\t\t\t\tcomponent={Settings}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\tpath=\"/users\"\n\t\t\t\t\t\t\t\tcomponent={UsersContainer}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\tpath=\"/login\"\n\t\t\t\t\t\t\t\tcomponent={Login}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\tpath=\"*\"\n\t\t\t\t\t\t\t\trender={() => <div>404 not found</div>}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Switch>\n\t\t\t\t\t</main>\n\t\t\t\t</div>\n\t\t\t</ThemeProvider>\n\t\t)\n\t}\n}\n\nlet mapStateToProps = (state) => ({\n\tinitialized: state.app.initialized\n})\n\nlet AppContainer = compose(\n\twithRouter,\n\tconnect(mapStateToProps, {initializeApp})\n)(App)\n\nconst SocialNetworkApp = () => {\n\treturn (\n\t\t<React.StrictMode>\n\t\t\t<BrowserRouter\n\t\t\t\tbasename={process.env.PUBLIC_URL}\n\t\t\t>\n\t\t\t\t<Provider store={store}>\n\t\t\t\t\t<AppContainer />\n\t\t\t\t</Provider>\n\t\t\t</BrowserRouter>\n\t\t</React.StrictMode>\n\t)\n}\n\nexport default SocialNetworkApp\n","import * as serviceWorker from './serviceWorker'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport SocialNetworkApp from './App'\n\nReactDOM.render(\n\t<SocialNetworkApp />,\tdocument.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input_field\":\"Login_input_field__bDvCA\",\"summary_error\":\"Login_summary_error__195GD\",\"input_captcha\":\"Login_input_captcha__1W8ec\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"logo\":\"Header_logo__1FkZe\",\"header\":\"Header_header__2A7jb\",\"brand\":\"Header_brand__YhHTP\",\"login_block\":\"Header_login_block__2le33\",\"button_logout\":\"Header_button_logout__2G62i\",\"button_wrap\":\"Header_button_wrap__MwFAR\"};","import React from 'react'\r\nimport logo from '../../../static/preloader.gif'\r\nimport cl from './Preloader.module.css'\r\n\r\nconst Preloader = () => {\r\n\treturn (\r\n\t\t<div className={cl.preloader_wrap}>\r\n\t\t\t<img src={logo} alt=\"\" />\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Preloader","module.exports = __webpack_public_path__ + \"static/media/avatar.4f6ee0b8.png\";"],"sourceRoot":""}